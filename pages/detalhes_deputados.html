<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Alcion Souza">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Deputados</title>
    <!-- Bootstrap core JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
	<script type="text/javascript" src="https://unpkg.com/xlsx@0.15.1/dist/xlsx.full.min.js"></script>

	<script src="../components/header.js" type="text/javascript" defer></script>
    <script src="../components/footer.js" type="text/javascript" defer></script>
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.3.0/css/mdb.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="../css/style.css">
  </head>
  <body onload="load();">
    <header-component></header-component>
	<div class="container">
		<br>
		<ul class="breadcrumb">
		  <li><a href="inicio.html">Início</a></li>
		  <li><a href="deputados.html">Deputados Federais</a></li>
		  <li>Detalhes Deputados Federais</li>
		</ul>	
		<main>
		</main>	
</form>
		
</head>


	</div>
    <footer-component></footer-component>
<script>
async function load(){

	 const queryString = window.location.search
	 const urlParams = new URLSearchParams(queryString)
	 const id = urlParams.get('id')
	 console.log(id)
		
	 const response  = await fetch('https://dadosabertos.camara.leg.br/api/v2/deputados/'+ id)
	 const data = await response.json()
	 console.log(data)
		
	 var dataNascimento = ''
	 var dataFalecimento = ''
	 var ultimoStatusData = ''
	 
	 if(data.dados.dataFalecimento != null){
	   dataFalecimento = new Date(data.dados.dataFalecimento).toLocaleDateString('pt-BR')
	 }
	 if(data.dados.dataNascimento != null){
	   dataNascimento = new Date(data.dados.dataNascimento).toLocaleDateString('pt-BR')
	 }
	 if(data.dados.ultimoStatus.data != null){
	   ultimoStatusData = new Date(data.dados.ultimoStatus.data).toLocaleDateString('pt-BR')
	 }
	 let output = ''
	     output += '<form class="row g-3">' +			   
						'<fieldset class="border p-2">' +
						   '<legend  class="float-none w-auto p-2">Dados Pessoais</legend>' +
							'<b>Nome civíl:   </b>'+ data.dados.nomeCivil +' <br>' +
							'<b>Data de Nascimento:   </b>'+ dataNascimento +' <br>' +
							'<b>Data de falecimento:   </b>'+ dataFalecimento +' <br>' +
							'<b>CPF:   </b>'+ data.dados.cpf +' <br>' +
							'<b>Escolaridade:   </b>'+ data.dados.escolaridade +' <br>' +
							'<b>Município de nascimento:   </b>'+ data.dados.municipioNascimento +' <br>' +
							'<b>Estado de nascimento:   </b>'+ data.dados.ufNascimento +' <br>' +
							'<b>Sexo:   </b>'+ data.dados.sexo +' <br>' +
						 '</fieldset>' +
						 '<fieldset class="border p-2">' +
						   '<legend  class="float-none w-auto p-2">Último Status</legend>' +
							'<b>Condição Eleitoral:   </b>'+ data.dados.ultimoStatus.condicaoEleitoral +' <br>' +
							'<b>E-mail:   </b>'+ data.dados.ultimoStatus.email +' <br>' +
							'<b>Data:   </b>'+ ultimoStatusData +' <br>' +
							'<b>Id Legislatura:   </b>'+ data.dados.ultimoStatus.idLegislatura +' <br>' +
							'<b>Nome:   </b>'+ data.dados.ultimoStatus.nome +' <br>' +
							'<b>Sigla Partido:   </b>'+ data.dados.ultimoStatus.siglaPartido +' <br>' +
							'<b>Sigla UF:   </b>'+ data.dados.ultimoStatus.siglaUf +' <br>' +
							'<b>Situação:   </b>'+ data.dados.ultimoStatus.situacao +' <br>' +
						 '</fieldset>' +
						  '<fieldset class="border p-2">' +
						   '<legend  class="float-none w-auto p-2">Gabinete</legend>' +
							'<b>Andar:   </b>'+ data.dados.ultimoStatus.gabinete.andar +' <br>' +
							'<b>E-mail:   </b>'+ data.dados.ultimoStatus.gabinete.email +' <br>' +
							'<b>Nome:   </b>'+ data.dados.ultimoStatus.gabinete.nome +' <br>' +
							'<b>Prédio:   </b>'+ data.dados.ultimoStatus.gabinete.predio +' <br>' +
							'<b>Sala:   </b>'+ data.dados.ultimoStatus.gabinete.sala +' <br>' +
							'<b>Telefone:   </b>'+ data.dados.ultimoStatus.gabinete.telefone +' <br>' +
						 '</fieldset>' +
				   '</form>' +
				   '<br>';
	 document.querySelector('main').innerHTML = output;
 }
</script> 
  </body>
<html>
