<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Alcion Souza">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Despesas Deputados Federais</title>
    <!-- Bootstrap core JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
	<script type="text/javascript" src="https://unpkg.com/xlsx@0.15.1/dist/xlsx.full.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/r/dt/dt-1.10.22/datatables.min.js"></script>
	
	<script src="../components/header.js" type="text/javascript" defer></script>
    <script src="../components/footer.js" type="text/javascript" defer></script>
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.3.0/css/mdb.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/r/dt/dt-1.10.22/datatables.min.css"/>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/r/dt/dt-1.10.22/datatables.min.css"/>
	<script type="text/javascript" src="https://cdn.datatables.net/r/dt/dt-1.10.22/datatables.min.js"></script>
	<link rel="stylesheet" href="../css/style.css">
  </head>
  <body onload="load();">
    <header-component></header-component>
	<div class="container">
		<br>
		<ul class="breadcrumb">
		  <li><a href="inicio.html">Início</a></li>
		  <li><a href="deputados.html">Deputados Federais</a></li>
		  <li>Despesas Deputados Federais</li>
		</ul>	
		<div class="container">
			<div id="content" class="content">
				<table id="deputados" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
						<thead>
							<tr>
								<th>ano</th>
								<th>cnpjCpfFornecedor</th>
								<th>codDocumento</th>
								<th>codLote</th>
								<th>codTipoDocumento</th>
								<th>dataDocumento</th>
								<th>nomeFornecedor</th>
								<th>numDocumento</th>
								<th>numRessarcimento</th>
								<th>parcela</th>
								<th>tipoDespesa</th>
								<th>tipoDocumento</th>
								<th>urlDocumento</th>
								<th>valorDocumento</th>
								<th>valorGlosa</th>
								<th>valorLiquido</th>							
							</tr>
						</thead>
						
				</table>
		
			</div>
		</div>
		<main>
		</main>	
	</div>
    <footer-component></footer-component>
<script>
async function load(){

	 const queryString = window.location.search
	 const urlParams = new URLSearchParams(queryString)
	 const id = urlParams.get('id')
	
	 const response  = await fetch('https://dadosabertos.camara.leg.br/api/v2/deputados/'+ id +'/despesas?ordem=ASC&ordenarPor=ano')
	 const data = await response.json()
	 setDataToTable(data)	
	
 }
</script> 

<script>
function setDataToTable(jsonData){
	$('#deputados').DataTable( {
    pagination: "bootstrap",
    filter:true,
	scrollX: true,
    data: jsonData.dados,
	language: "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Portuguese-Brasil.json",
    destroy: true,
    lengthMenu:[5,10,25],
    pageLength: 10,
	                "language": {
                    "lengthMenu": "Visualizando _MENU_ Registros por página",
                    "zeroRecords": "Não existe registros para visualização",
					"search":"Busca",
                    "info": "Mostrando página _PAGE_ de _PAGES_",
                    "infoEmpty": "No records available",
                    "infoFiltered": "(filtered from _MAX_ total records)",
                    "paginate": {
                        "previous": "Página Anterior",
                        "next": "Próxima página"
                    }
                },
    "columns":[  
                {     "data"     :     "ano"     },  
                {     "data"     :     "cnpjCpfFornecedor"},  
                {     "data"     :     "codDocumento"}, 
                {     "data"     :     "codLote"},  
                {     "data"     :     "codTipoDocumento"},  
                {     "data"     :     "dataDocumento"},
                {     "data"     :     "nomeFornecedor"},
                {     "data"     :     "numDocumento"},
                {     "data"     :     "numRessarcimento"},	
                {     "data"     :     "parcela"},
                {     "data"     :     "tipoDespesa"},
                {     "data"     :     "tipoDocumento"},
                {     "data"     :     "urlDocumento"},
                {     "data"     :     "valorDocumento"},	
                {     "data"     :     "valorGlosa"},
                {     "data"     :     "valorLiquido"}			
           ],
	columnDefs: [ {
		  targets: [12],
		  "render": function (data, type, row, meta) {
			 return '<a href="' + data + '" target="_blank"> link </a>';
			        
		   }
}]
  } );
}

</script>
  </body>
<html>
